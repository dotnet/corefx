<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="12.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <!-- Imported from $(BuildDir)dir.traversal.targets -->

  <Target Name="ProducesPackageId"
          Returns="@(PackageIds)" 
          DependsOnTargets="FilterProjects">
    <MSBuild Targets="ProducesPackageId"
             Projects="@(Project)"
             BuildInParallel="true"
             ContinueOnError="ErrorAndContinue">
      <Output TaskParameter="TargetOutputs"
              ItemName="PackageIds" />             
    </MSBuild>
    <ItemGroup>
      <PackageIds Include="@(PackageIds)" />
    </ItemGroup>
  </Target>

  <Target Name="ProducesTarget" DependsOnTargets="FilterProjects">
    <MSBuild Targets="ProducesPackageId"
             Projects="@(Project)"
             BuildInParallel="true"
             ContinueOnError="ErrorAndContinue">
      <Output TaskParameter="TargetOutputs"
              ItemName="PackageIds" />      
    </MSBuild>
    <Message Text="%(PackageIds.Identity)" Importance="High" />
  </Target>
</Project>
